---
services:
  main:
    dependencies:
      - mqtt
      - ServiceName
    lifecycle:

  mqtt:
    lifecycle:
    parameters:
      accessControl:
        aws.greengrass.ipc.pubsub:
          policyId2:
            operations:
              - publish
              - subscribe

  ServiceName:
    resources:
      - http-resource
    lifecycle:
    parameters:
      accessControl:
        aws.greengrass.ipc.pubsub:
          policyId1:
            operations:
              - publish
              - subscribe
