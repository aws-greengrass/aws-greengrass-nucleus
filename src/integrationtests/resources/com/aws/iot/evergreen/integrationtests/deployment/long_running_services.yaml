---
services:
  sleeperB:
    lifecycle:
      run: |-
        while true; do
        date; echo sleeperB_running; sleep 5
        done

  sleeperA:
    dependencies:
      - sleeperB
    lifecycle:
      run: |-
        while true; do
        date; echo sleeperA_running; sleep 5
        done

  main:
    dependencies:
      - sleeperA
      - sleeperB
    lifecycle:
      run: |-
        while true; do
        sleep 5
        done