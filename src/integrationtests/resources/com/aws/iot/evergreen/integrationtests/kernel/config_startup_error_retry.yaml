services:
  startupErrorRetry:
    lifecycle:
      startup: |-
        if [ -f "/tmp/egStartupErrorRetrySucceed" ]; then
          echo "StartUp_SUCCEED"
          rm /tmp/egStartupErrorRetrySucceed
        else
          echo "StartUp_FAIL"
          touch /tmp/egStartupErrorRetrySucceed
          exit 1
        fi

  main:
    lifecycle:
      install:
        all: echo All installed
      run: |-
        echo main of config_startup_error_retry is running
        while true; do
        date; sleep 5;
        done
    dependencies:
      - startupErrorRetry
