---
services:
  plain:
    lifecycle:
      startup:
        all: "{platform.invoke} {args}"
  main:
    dependencies:
      - IPCService
      - mqtt
      - ServiceName
    lifecycle:
      run: |-
        sleep 300

  mqtt:
    dependencies:
      - IPCService
    resources:
      - evergreen_1._mqtt._tcp.local
      - evergreen_1._http._tcp.local
    lifecycle:
      run:
        exit 0

  ServiceName:
    dependencies:
      - IPCService
    any:
      resources:
        - http-resource
    lifecycle:
      run:
        exit 0
