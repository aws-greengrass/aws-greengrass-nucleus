---
RecipeFormatVersion: '2020-01-25'
ComponentName: CustomerApp
ComponentDescription: A customer app
ComponentPublisher: Me
ComponentVersion: '1.0.0'

# NEW configuration section
ComponentConfiguration:
  DefaultConfiguration:
    sampleText: This is a test
    office:
      ac: 'OFF'

Manifests:
  - Platform:
      os: all
    Parameters:
      - name: sampleText
        value: This is a test
        type: STRING
    Lifecycle:
      run: >-
        echo "Hello Greengrass.  I'm the old param: {{params:sampleText.value}}.
        I'm the new config for /sampleText: {configurations:/sampleText}.
        I'm a new nested config for /office/ac: {configurations:/office/ac}"
    Dependencies:
      Mosquitto:
        VersionRequirement: 1.0.0
      ClassService:
        VersionRequirement: 1.0.0
    Artifacts:
      - URI: greengrass:customerApp

#  - Platform:
#      os: windows
#    Parameters:
#      - name: sampleText
#        value: This is a test
#        type: STRING
#    Lifecycle:
#      run:
#        powershell -command "& { echo \"Hello Greengrass. {{params:sampleText.value}}\" }"
#    Dependencies:
#      Mosquitto:
#        VersionRequirement: 1.0.0
#      ClassService:
#        VersionRequirement: 1.0.0
#    Artifacts:
#      - URI: greengrass:customerApp