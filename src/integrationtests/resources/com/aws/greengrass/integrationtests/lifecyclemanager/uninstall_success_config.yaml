---
services:
  aws.greengrass.Nucleus:
    configuration:
      runWithDefault:
        posixUser: nobody
        windowsUser: integ-tester

  UninstallTestComponent:
    lifecycle:
      posix:
        run: echo "Component running" && sleep 30
        uninstall: |
          echo "Uninstall script executing"
          echo "GREENGRASS_LIFECYCLE_EVENT: $GREENGRASS_LIFECYCLE_EVENT"
          echo "GREENGRASS_COMPONENT_NAME: $GREENGRASS_COMPONENT_NAME"
          echo "GREENGRASS_COMPONENT_VERSION: $GREENGRASS_COMPONENT_VERSION"
          echo "Uninstall completed successfully"
      windows:
        run: echo Component running && timeout /t 30
        uninstall: |
          echo Uninstall script executing
          echo GREENGRASS_LIFECYCLE_EVENT: %GREENGRASS_LIFECYCLE_EVENT%
          echo GREENGRASS_COMPONENT_NAME: %GREENGRASS_COMPONENT_NAME%
          echo GREENGRASS_COMPONENT_VERSION: %GREENGRASS_COMPONENT_VERSION%
          echo Uninstall completed successfully
